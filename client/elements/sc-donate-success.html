<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../bower_components/iron-location/iron-location.html">
<link rel="import" href="../bower_components/iron-meta/iron-meta.html">
<link  rel="import" href="./addons/sc-static-page.html"/>

<link rel="import" href="../styles/static-styles.html">

<dom-module id="sc-donate-success">
    <template>
        <style include="static-styles sc-scrollbar-style">
        </style>

        <iron-location path="{{path}}"></iron-location>
        <iron-meta id="meta"></iron-meta>

        <div id="page-wrap">
            <section>
                <template is="dom-if" if="{{donationSuccessData.amount}}">
                    <div>{{localize('DonationOf')}} <b>{{donationSuccessData.amount}} {{donationSuccessData.currency}}</b>
                        <template is="dom-if" if="{{donationSuccessData.name}}">
                            {{localize('MadeBy')}} <b>{{donationSuccessData.name}}</b>.
                        </template>
                        {{localize('SuttaCentralNote')}}<br>
                        {{localize('PaymentServiceIsStripe')}}<br>
                        <b>{{donationSuccessData.dateTime}} UTC</b>.<br>
                        <b>{{_getSubscriptionName(donationSuccessData.subscription, localize)}}</b>.
                    </div>
                </template>
            </section>
        </div>
    </template>

    <script>
        /**
         * @extends {Polymer.Element}
         * @appliesMixin Polymer.AppLocalizeBehavior
         */
        class SCDonateSuccess extends SCStaticPage {
            static get is() {
                return 'sc-donate-success';
            }

            static get properties() {
                return {
                    path: {
                        type: String
                    },
                    donationSuccessData: {
                      type: Object,
                      statePath: 'donationSuccessData',
                    },
                    localizedStringPath: {
                      type: String,
                      value: '/localization/elements/sc-donate-success/'
                  }
                }
            }

            static get actions() {
                return {
                    setDonationSuccessData(donationSuccessData) {
                        return {
                            type: 'CHANGE_DONATION_SUCCESS',
                            donationSuccessData: donationSuccessData
                        }
                    }
                }
            }

            detached() {
                super.detached();
                this.dispatch('setDonationSuccessData', {});
            }

            _getSubscriptionName(subscription, localize) {
                return subscription ? localize('MonthlySubscription') : localize('OneTimeDonation');
            }

        }

        customElements.define(SCDonateSuccess.is, SCDonateSuccess);
    </script>
</dom-module>
