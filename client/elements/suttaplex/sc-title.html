<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">

<dom-module id="sc-title">
  <template>
    <style is="custom-style">
      h1, h2, h3 {
        margin: 0;
      }

      .node-head-container {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
      }

      .node-top-heading {
        @apply --paper-font-headline;
        @apply --sc-sans-font;
      }

      .node-secondary-heading {
        @apply --paper-font-title;
        @apply --sc-sans-font;
      }

      .node-description {
        @apply --paper-font-body1;
        @apply --sc-sans-font;
      }

    </style>

    <div class="node-head-container">
      <h1 class$="[[_calculateTitleClass(inputType)]]">[[inputTitle]]</h1>

      <template is="dom-if" if="[[inputText]]">
        <paper-icon-button icon="[[toggleIcon]]" on-tap="_toggleOpened"></paper-icon-button>
      </template>
      
    </div>

    <template is="dom-if" if="[[inputText]]">
      <iron-collapse id="collapse" opened="{{opened}}">
        <div class="node-description" inner-h-t-m-l="[[inputText]]"></div>
      </iron-collapse>
    </template>

  </template>

  <script>
      class SCTitle extends Polymer.Element {
          static get is() {
              return 'sc-title'
          }

          static get properties() {
              return {
                inputTitle: String,
                inputText: String,
                inputType: String,
                opened: {
                  type: Boolean,
                  value: false,
                  notify: true
                },
                toggleIcon: {
                  type: String,
                  computed: '_computeToggleIcon(opened)'
                },
              }
          }

          _computeToggleIcon() {
            return this.opened ? 'icons:expand-less' : 'icons:expand-more';
          }
          
          _toggleOpened(e) {
              this.opened = !this.opened;
          }

          _calculateTitleClass(inputType) {
              return inputType == 'grouping' ? 'node-top-heading' : 'node-secondary-heading'
          }

      }
      customElements.define(SCTitle.is, SCTitle)
  </script>
</dom-module>

